common:

  database: "postgresql://user:pass@localhost:5432/dbname"
  prefix: ../data/cartodb/
  format: csv

exports:

  - query: "SELECT p.id_partido, p.siglas, p.nombre FROM partidos p WHERE p.id_partido IN ('0131', '0135') ORDER BY p.id_partido;"
    filename: "arg_ballo_partidos.csv"

  - query: "SELECT w.id_establecimiento, w.key_sie, w.id_distrito, w.distrito, w.id_seccion, w.seccion, w.id_circuito, w.mesa_desde, w.mesa_hasta, w.num_mesas, w.nombre, w.direccion, w.localidad, w.cod_postal, w.electores, w.votantes, w.positivos, w.sqrt_positivos as raiz_positivos, w.id_partido, w.votos, w.margin_victory as margen_victoria, w.geom FROM ballo_winner_establecimientos w WHERE w.positivos > 0 ORDER BY w.id_establecimiento;"
    filename: "arg_ballo_est_ganador.csv"

  - query: "SELECT d.id_establecimiento, d.id_partido, d.votos, d.votos_paso, d.votos_pv, d.dif_paso, d.dif_pv FROM ballo_diff_establecimientos d ORDER BY d.id_establecimiento, d.id_partido;"
    filename: "arg_ballo_est_diff_votos.csv"

  - query: "SELECT t.id_establecimiento, t.key_sie, t.id_distrito, t.distrito, t.id_seccion, t.seccion, t.id_circuito, t.mesa_desde, t.mesa_hasta, t.num_mesas, t.nombre, t.direccion, t.localidad, t.cod_postal, t.wkb_geometry_4326 as geom, t.electores, t.votantes, t.validos, t.positivos, t.blancos, t.nulos FROM establecimientos_totales t WHERE t.positivos > 0 ORDER BY t.id_establecimiento;"
    filename: "arg_ballo_establecimientos.csv"

  - query: "SELECT t.id_agrupado, t.keys_sie, t.establecimientos, t.id_distrito, t.distrito, t.id_seccion, t.seccion, t.circuitos, t.rangos_mesas, t.num_mesas, t.nombre, t.direccion, t.localidad, t.cod_postal, t.wkb_geometry_4326 as geom, t.electores, t.votantes, t.validos, t.positivos, t.blancos, t.nulos FROM localizaciones_totales t WHERE t.positivos > 0 ORDER BY id_agrupado"
    filename: "arg_ballo_localizaciones.csv"

  - query: "SELECT t.id_establecimiento, t.id_agrupado FROM relaciones t ORDER BY t.id_establecimiento"
    filename: "arg_ballo_rel_est_loc.csv"

  - query: "SELECT t.id_agrupado, t.key_telegrama FROM localizaciones_telegramas t ORDER BY t.id_agrupado"
    filename: "arg_ballo_loc_telegramas.csv"

  - query: "SELECT w.id_agrupado, w.keys_sie, w.establecimientos, w.id_distrito, w.distrito, w.id_seccion, w.seccion, w.circuitos, w.rangos_mesas, w.num_mesas, w.nombre, w.direccion, w.localidad, w.cod_postal, w.electores, w.votantes, w.positivos, w.sqrt_positivos as raiz_positivos, w.id_partido, w.votos, w.margin_victory as margen_victoria, w.geom FROM ballo_winner_localizaciones w WHERE w.positivos > 0 ORDER BY w.id_agrupado;"
    filename: "arg_ballo_loc_ganador.csv"

  - query: "SELECT d.id_agrupado, d.id_partido, d.votos, d.votos_paso, d.votos_pv, d.dif_paso, d.dif_pv FROM ballo_diff_localizaciones d ORDER BY d.id_agrupado, d.id_partido;"
    filename: "arg_ballo_loc_diff_votos.csv"